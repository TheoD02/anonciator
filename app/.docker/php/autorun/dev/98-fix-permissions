#!/bin/sh
set -e

echo "ðŸ“‚ Check if DIRS exists"
for dir in ${XDG_CONFIG_HOME} ${XDG_DATA_HOME} ${XDG_CACHE_HOME} ${XDG_RUNTIME_DIR} ${COMPOSER_CACHE_DIR}; do
  echo "ðŸ“‚ Check if ${dir} exists"
  if [ ! -d "${dir}" ]; then
    echo "ðŸ“‚ Creating ${dir}"
    mkdir -p "${dir}"
  fi
done

echo "ðŸ“‚ Fixing permissions XDG_*"
chown -R www-data:www-data ${XDG_CONFIG_HOME} ${XDG_DATA_HOME} ${XDG_CACHE_HOME} ${XDG_RUNTIME_DIR} ${COMPOSER_CACHE_DIR}

echo "ðŸ“‚ Fixing permissions app"
chown -R www-data:www-data /app